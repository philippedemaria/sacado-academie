{% extends 'dashboard.html' %}
{% load widget_tweaks %}
{% load static %}

{% block require %}
    {% if idg %}
    <script src="{% static 'js/require.js' %}" data-main="{% static 'js/common3.js' %}"></script> 
    {% else %}
    <script src="{% static 'js/require.js' %}" data-main="{% static 'js/common-index.js' %}"></script> 
    {% endif %}

    <script>
       require(['script/ajax-dashboard']);
    </script> 
{% endblock %}

{% block page_title %}
    {% if student.user.avatar %} 
        <a href="{% url 'change_avatar' student.user.id %}"><img src="{{ student.user.avatar }}"  class="avatar" /></a>
    {% else %}
        <a href="{% url 'change_avatar' student.user.id %}"><img src="{% static 'img/avatar/0.jpg' %}" width="80px" height="80px" class="avatar" /></a>
    {% endif %} Profil de {{ student.user.first_name }} {{ student.user.last_name }}
{% endblock %}
 
{% block page_menu_right %}
{% endblock %}


{% block body %}
    
<section class="content_main">

    <div class="row">
        <div class="col-sm-12 col-md-7">
            <form action="" method="POST" class="profile_card">
                <h3 class="thin">Détails du compte de {{ student.user.first_name }}</h3>
                {% csrf_token %}
                <div class="row">
                    <div class="col-sm-12 col-md-4">
                        <div class="form-group">
                            <label>{{ user_form.username.label_tag }}</label>
                            {{ user_form.username |add_class:"form-control" }}
                            {{ user_form.username.errors }}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-md-2">
                        <div class="form-group">
                            <label>{{ user_form.civilite.label_tag }}</label>
                            {{ user_form.civilite  |add_class:"form-control select2" }}
                            {{ user_form.civilite.errors }}
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-5">
                        <div class="form-group">
                            <label>{{ user_form.last_name.label_tag }}</label>
                            {{ user_form.last_name  |add_class:"form-control" }}
                            {{ user_form.last_name.errors }}
                        </div>
                    </div>

                    <div class="col-sm-12 col-md-5">
                        <div class="form-group">
                            <label>{{ user_form.first_name.label_tag }}</label>
                            {{ user_form.first_name  |add_class:"form-control" }}
                            {{ user_form.first_name.errors }}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-md-6">
                        <div class="form-group">
                            <label>{{ user_form.email.label_tag }}</label>
                            {{ user_form.email  |add_class:"form-control" }}
                            {{ user_form.email.errors }}
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6">
                        <div class="form-group">
                            <label>{{ user_form.time_zone.label_tag }}</label>
                            {{ user_form.time_zone  |add_class:"form-control select2" }}
                            {{ user_form.time_zone.errors }}
                        </div>
                    </div>
                </div>   
                <div class="row">
                    <div class="col-sm-12 col-md-6">
                        <div class="form-group">
                            <label>Formule : </label>
                            <span class="font_sacado">{{ student.data_menu.name }}  </span>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6">
                        <div class="form-group">
                            <label>{{ form.level.label_tag }}</label>
                            <span class="font_sacado">{{ student.level.name }}</span>
                        </div>
                    </div>
                </div>     
                <div class="row">
                    <div class="col-sm-12 col-md-12">
                        <div class="form-group">
                            <input value="Enregistrer" type="submit" class="btn btn-primary"/>
                            <a href="javascript:history.back()">
                                <input type="button" value="Annuler"
                                       class="btn btn-default "/>
                            </a>
                        </div>   
                    </div>
                </div>
            </form>
        </div>   
        <div class="col-sm-0 col-md-1"></div>
        <div class="col-sm-12 col-md-4">
            <form action="{% url 'change_password' student.user.id %}" method="POST"  class="profile_card">
                <h3 class="thin">Créer un nouveau de mot de passe pour {{ student.user.first_name }}</h3>
                <div class="form-group">{% csrf_token %}
                    <label>Nouveau mot de passe</label>
                    <input type="password" name="password" id="this_password" class='form-control'/>
                </div>
                <div class="form-group">
                    <label>Confirmer ce mot de passe</label>
                    <input type="password" name="conf_password" id="conf_password"  class='form-control' />
                </div>
                <div class="form-group">
                    <input value="Activer ce mot de passe" type="submit" class="btn btn-primary" onclick="return testPassword('this_password', 'conf_password')" />
                </div>        
            </form>
        </div>
    </div>



</section>
 
 
{% endblock %}

 
