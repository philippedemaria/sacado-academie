{% load static %}
{% load item_tags %}
{% load widget_tweaks %}


{% if rc.type_id == 0 %}

    <!---------------------------------------------------------->
    <!-------------------- sacado exercise  -------------------->
    <!---------------------------------------------------------->

    <div class="card_freeze">
        <div id="div_results{{ rc.id }}" class="div_results no_visu_on_load" >
                <div class="row">
                    <div class="col-sm-12 col-md-12"> <a href="#" class="div_results_close pull-right" data-relation_id="{{rc.id}}"><i class="fa fa-times"></i></a>     
                      {% if noggb_data.comment %}
                        <label  style="font-size: 10px;font-weight: 600">Commentaire :</label> {{ noggb_data.comment }} 
                        <hr style="padding:0px; margin:10px 0px"/> 
                      {% endif %}
                      {% if noggb_data.audio %}
                        <audio controls  class="dv_results">
                          <source src="{{ noggb_data.audio.url }}" type="audio/mpeg">
                          <span class="text-danger">Votre navigateur ne lit pas l'audio.</span>
                        </audio>
                        <hr style="padding:0px; margin:10px 0px"/> 
                      {% endif %}
                    </div>
                </div>                            
                <div class="row">
                    <div class="col-sm-12 col-md-12"> 
                        <a href="#" data-toggle='modal' data-target='#my_production' 
                                        class="read_my_production pull-right" data-student_id="{{ student.user.id}}" data-custom=0 
                                        data-exercise_id="{{ rc.id}}">
                            <b> Voir ma copie</b>
                        </a>   
                        <label  style="font-size: 10px;font-weight: 600">Compétences 
                           
                        </label>
                          {% for d in noggb_data.skills.all %} 
                            <li class="sanspuce" style="font-size: 10px;">{{d.skill.name }}  <i class="fa fa-square
                                {% if d.point < stage.low %}
                                 text-danger 
                                {% elif d.point < stage.medium  %}
                                 text-warning 
                                {% elif d.point < stage.up  %}
                                 text-success 
                                {% else %}
                                 text-primary 
                                {% endif %}"></i>  </li>
                          {% endfor %}
                    </div>
                </div>
        </div>                           

        <!-- Fin de div de résultat -->
        <!-- Si l'exercice est bloqué, on pose une div par-dessus -->
        <div class="card-body student" >
            <span style="font-size: 40px; padding-left:3px;float:left; padding-top: 10px;  color: {{ rc.parcours.color}} ; ">
                {{ forloop.counter }}.</span> 
            <div class="card-score-student">
                    <span class="markdown"> 
                           
                    </span>
            </div>
            {% if rc.exercise.supportfile.calculator %}
              <img src="{% static 'img/calculator.png' %}" class="pull-right" width="35px" />
            {% else %}
              <img src="{% static 'img/no_calculator.png' %}" class="pull-right"   width="35px" />
            {% endif  %} 
        </div>                    
        <div class="card-image">

       
                {% if rc.exercise.supportfile.is_ggbfile %}  

                            {% if rc.is_in_average %}
                                <div class="alert alert-white" style="background: {{ parcours.color }} ; cursor:help;
                                                                        color:white;position: absolute; z-index:9; opacity:0.8 ;
                                                                        top:100px; left:0px; width:18%;font-size:20px;border-radius: 0px 4px 4px  0px;">
                                    <i class="bi bi-award" title="Incontournable"></i>
                                </div>
                            {% endif %}

 
                            <a href="{% url 'show_this_hbook_exercise'  rc.exercise.id   %}">  
                                <img src="{{ rc.exercise.supportfile.imagefile.url }}"  class="image_parcours" {% if not rc.is_publish %} style="opacity:0.8" {% endif %}>
                            </a>
  
                {% else %}
                    {% if is_blck %}
                        <div class="alert alert-danger" style="position: absolute; z-index:9; top:100px;font-size:12px;border-radius: 0px 4px 4px  0px;"> 
                              <i class="fa fa-lock"></i> <span class="hidden_lock"> {{ rc.lock|date:"d-m-Y à H:i" }}</span>
                        </div>
                        <a href="#"> 
                            <img src="{{ rc.exercise.supportfile.imagefile.url }}"  class="image_parcours" {% if not rc.is_publish %} style="opacity:0.8" {% endif %}  >
                        </a>
                    {% else %}
                        {% if parcours.is_next and not available.is_ok %} 
                            <div class="alert alert-danger" style="position: absolute; z-index:9; top:100px;font-size:12px;border-radius: 0px 4px 4px  0px;"> 
                                  <i class="fa fa-lock"></i>  Vous devez passer à l'exerice suivant
                            </div>
                 
                            <img src="{{ rc.exercise.supportfile.imagefile.url }}"  class="image_parcours" {% if not rc.is_publish %} style="opacity:0.8" {% endif %}  >
                
                        {% else %}
                            <a href="{% url 'write_exercise'  rc.id   %}"> 
                                <img src="{{ rc.exercise.supportfile.imagefile.url }}"  class="image_parcours" {% if not rc.is_publish %} style="opacity:0.8" {% endif %}  >
                            </a>
                        {% endif %}
                    {% endif  %}
                {% endif  %}
        </div>
    </div>
<!---------------------------------------------------------->
<!-------------------- sacado exercise  -------------------->
<!---------------------------------------------------------->
{% elif rc.type_id == 1 %} 
<!---------------------------------------------------------->
<!-------------------- custom exercise  -------------------->
<!---------------------------------------------------------->
    <div class="card_freeze"  {% if score %} style="opacity:0.5" {% endif %}  >
        <!-- div de résultat -->   
        <div class="card-body student">
            <span style="font-size: 40px; padding-left:3px;float:left; padding-top: 10px; {% if not score %} color: {{ parcours.color}} ;  {% endif %} ">
                {{ forloop.counter }}.</span> 
            <div class="card-score-student"  >

            {% if submitter %}
            <div style="font-size: 10px; text-align: center; position: absolute; top:0px; background-color: {{ parcours.color}}; color: #FFF; border-radius: 4px">En attente<br> de correction</div>
            {% endif %}
            </div>
            {% if rc.calculator %}
              <img src="{% static 'img/calculator.png' %}" class="pull-right" width="35px" />
            {% else %}
              <img src="{% static 'img/no_calculator.png' %}" class="pull-right"   width="35px" />
            {% endif  %} 
        </div> 
        <div class="card-image"> 

          <div style="position: absolute; left : 30px; top:41px;" id="annoncement{{rc.id}}"   >   
              <span class="helper_tip btn btn-default">Consigne
                <div class="helper_tip_text_right">{{rc.type_of_document.instruction|insert_tags:45|safe}} </div> 
              </span>
          </div>

                <a href="{% url 'write_custom_exercise' rc.id parcours.id %}"> 
                    {% if rc.imagefile %} 
                        <img src="{{ rc.imagefile.url }}"  class="image_parcours" >
                    {% elif rc.is_python %}
                        <img src="{% static 'img/python.jpg' %}"  class="image_parcours" >
                    {% else %}
                        <img src="{% static 'img/custom_exercise.jpg' %}"  class="image_parcours" >
                    {% endif %}
                </a>


            <div class="card-text" style="background-color:{{ parcours.color }};color:{{ parcours.color|contrast_color }}">
                <i class="fa fa-fw fa-barcode"></i> {{ rc.code }}
                <i class="fa fa-fw fa-clock-o"></i> {{ rc.duration }} min
                <span class="pull-right selector_div_result_custom" data-customexercise_id ="{{ rc.id }}"  data-custom=1 ><i class="fa fa-copy"></i></span>
            </div>
        </div>
    </div> 

{% elif rc.type_id == 2 %} 
<!---------------------------------------------------------->
<!--------------------      COURS       -------------------->
<!---------------------------------------------------------->
{% with  rc.type_of_document as course %}
<div  class="card_freeze is_document_sequence"  style="border: 3px solid #7F62B4">

        <h1 class="is_document_sequence_color_title"> {{ course.forme }}</h1>
        <h3 class="is_document_sequence_color">      {% if course.title|length > 40 %}
                      {{ course.title|truncatechars:"40" }}
                    {% else %}
                        {{ course.title}}
                    {% endif %}</h3>

    <!-- box-footer DES FONCTIONNALITES  -->
    <div class="document_sequence_footer"> 
 
         <div class="row">  
            <div class="col-lg-6 col-xs-6" align="center">
                <a href="{% url 'show_course_sequence_student' course.id parcours.id %}" class="white" >
                    Lire ce cours
                </a>
            </div> 
            <div class="col-lg-6 col-xs-6" align="center">
                    <i class="fa fa-fw fa-clock"></i>  {{ course.duration }} min. 
            </div>

        </div>

    </div>
</div>  
{% endwith %}


{% elif rc.type_id == 3 %}
<!---------------------------------------------------------->
<!--------------------       Quizz      -------------------->
<!---------------------------------------------------------->
{% with  rc.type_of_document as quizz %}
<div  class="card_freeze is_document_sequence"  style="border: 3px solid #7F62B4"> 

    <h1 class="is_document_sequence_color_title"> QUIZZ</h1>
    <h3 class="is_document_sequence_color">      
        {% if quizz.title|length > 40 %}
            {{ quizz.title|truncatechars:"40" }}
        {% else %}
            {{ quizz.title}}
        {% endif %}
    </h3>
    <!-- box-footer DES FONCTIONNALITES  -->
    <div class="document_sequence_footer">
         <div class="row">  
            <div class="col-lg-6 col-xs-6">
                <a href="{% url 'goto_quizz_student' quizz.id %}" class="white">
                    <i class="fa fa-fw fa-play"></i> Lecture
                </a>
            </div> 
            <div class="col-lg-6 col-xs-6" style="font-size:16px;color: #FFF">
                    <i class="fa fa-fw fa-clock"></i>  {{ quizz.duration|time_done }} 
            </div>

        </div>

    </div>
</div> 
{% endwith %}


{% elif rc.type_id == 4 %}
<!---------------------------------------------------------->
<!--------------------    Flashpack     -------------------->
<!---------------------------------------------------------->

{% with  rc.type_of_document as flashpack %}
<div  class="card_freeze is_document_sequence"  style="border: 3px solid #7F62B4">
 
    <h1 class="is_document_sequence_color_title"> FLASHCARDS</h1>
    <h3 class="is_document_sequence_color">  
        {% if flashpack.title|length > 30 %}
        <span class="helper_tip" style="color:{{ flashpack.color|contrast_color }};font-size:18px;">{{ flashpack.title|truncatechars:"30" }}
            <div class="helper_tip_text_right" style="font-size:18px;">{{ flashpack.title }}</div>
        </span>
        {% else %}
            {{ flashpack.title}}
        {% endif %}
    </h3>
 
    <!-- box-footer DES FONCTIONNALITES  -->
    <div class="document_sequence_footer">
         <div class="row">  
            <div class="col-lg-12 col-xs-12">
 
                    {% if not flashpack.is_global %}
                        <a href="{% url 'show_flashpack' flashpack.id %}" class="edit" onclick="return launch_flashpack()"><i class="bi bi-bootstrap-reboot"></i> Lancer les flashcards </a> 
                    {% else %}
                        <span class="automatic_insertion">Pas de flashcard aujourd'hui</span>
                        <a href="{% url 'flashpack_results' flashpack.id 0 %}" class="edit pull-right" ><i class="bi bi-trophy"></i> Résultats</a>
                    {% endif %}
 
            </div> 
        </div>
    </div>
</div> 


{% endwith %}



{% elif rc.type_id == 5 %}  
<!---------------------------------------------------------->
<!--------------------     BIBLIOTEX    -------------------->
<!---------------------------------------------------------->
{% with  rc.type_of_document as bibliotex %}
<div  class="card_freeze is_document_sequence"  style="border: 3px solid #7F62B4">

    <h1 class="is_document_sequence_color_title"> BIBLIOTEX</h1>
    <h3 class="is_document_sequence_color">  
        {% if flashpack.title|length > 30 %}
        <span class="helper_tip" style="color:{{ flashpack.color|contrast_color }};font-size:18px;">{{ flashpack.title|truncatechars:"30" }}
            <div class="helper_tip_text_right" style="font-size:18px;">{{ flashpack.title }}</div>
        </span>
        {% else %}
            {{ flashpack.title}}
        {% endif %}
    </h3>
    <!-- box-footer DES FONCTIONNALITES  -->
    <div class="document_sequence_footer">
        <div class="row"> 
           <div class="col-lg-12 col-xs-12">
                <a href="{% url 'parcours_show_bibliotex_student' parcours.id bibliotex.id  %}" class="edit"> <i class="bi bi-play"></i> Voir les {{ bibliotex.exotexs.count}} exercices</a>  
            </div> 
        </div>
        <div class="row" style="margin-top:10px;"> 
           <div class="col-lg-12 col-xs-12">
                <a href="{% url 'print_bibliotex_by_student' bibliotex.id  %}" class="edit bibliotex_shower" ><i class="bi bi-download"></i> Télécharger en pdf </a>
            </div>
        </div>
    </div>
</div> 
{% endwith %}

{% endif %}






